loki:
  service_accounts:
    - account_id: loki-gcs
      display_name: Loki GCS Writer
      ns: monitoring
      kubernetes_service_account: loki
  storage_buckets:
    - name: finure-loki
      service_account_id: loki-gcs
      role: roles/storage.objectAdmin
vault:
  service_accounts:
    - account_id: vault-sa
      display_name: Vault SA
      ns: vault
      kubernetes_service_account: vault
      kmsroles:
      - "roles/cloudkms.cryptoKeyEncrypterDecrypter:vault-unseal" # role:kms-key
      - "roles/cloudkms.viewer:vault-unseal"
  storage_buckets:
    - name: finure-vault
      service_account_id: vault-sa
      role: roles/storage.objectAdmin
sops:
  service_accounts:
    - account_id: sops-sa
      display_name: SOPS SA
      ns: flux-system
      kubernetes_service_account: kustomize-controller
      kmsroles:
      - "roles/cloudkms.cryptoKeyEncrypterDecrypter:sops-key" # role:kms-key
atlantis:
  service_accounts:
    - account_id: atlantis
      display_name: Atlantis SA
      ns: tools
      kubernetes_service_account: atlantis
      roles:
       - "roles/resourcemanager.projectIamAdmin"
       - "roles/iam.serviceAccountAdmin"
  storage_buckets:
    - name: finure-tfstate
      service_account_id: atlantis
      role: roles/storage.objectAdmin
argo:
  service_accounts:
    - account_id: argo-workflows
      display_name: Argo Workflows SA
      ns: tools
      kubernetes_service_account: argo
  storage_buckets:
    - name: finure-argo
      service_account_id: argo-workflows
      role: roles/storage.objectAdmin
opencost:
  service_accounts:
    - account_id: opencost
      display_name: OpenCost SA
      ns: tools
      kubernetes_service_account: opencost
      roles:
       - "roles/compute.viewer"
       - "roles/bigquery.jobUser"
  bigquery:
    - name: billing_data
      service_account_id: opencost
      role: roles/bigquery.dataViewer
    - name: billing_data
      service_account_id: opencost
      role: roles/bigquery.user
cnpg:
  service_accounts:
    - account_id: cnpg-cluster
      display_name: Cloudnative-PG
      ns: cnpg-database
      kubernetes_service_account: cnpg-cluster
  storage_buckets:
    - name: finure-cnpg
      service_account_id: cnpg-cluster
      role: roles/storage.objectAdmin
airflow:
  service_accounts:
    - account_id: airflow
      display_name: Airflow SA
      ns: airflow
      kubernetes_service_account: airflow
  storage_buckets:
    - name: finure-airflow
      service_account_id: airflow
      role: roles/storage.objectAdmin
